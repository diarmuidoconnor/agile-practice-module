## Multi-component Application.

Recall, we demonstrated a mukti-container application during the Docker part of this module. That application's architecture is illustrated below for your convenience - see [here][lab] for the Docker lab you completed previously.

![][arch]

We will deploy this application to Kubernetes as a set of deployments and services. Both application components (the Mongo database server and the Express Web App) will be deployed as pods using deployment manifests, and each will have a matching service.

![][depl]

In an integrated terminal, log in to the ocp-setu.waltoninstitute cluster:
~~~
$  oc login https://api.ocp-setu.waltoninstitute.ie:6443 --username=your_username      (Substitute your username)
~~~

## Setup.

A pod needs privileges to allow it to pull specific images from Docker Hub, for example, the MongoDB server. In Kubernetes, a pod's privileges are determined by the __ServiceAccount__ assigned to it. A ServiceAccount has policies attached to it, and these grant privileges to the pod. The default serviceaccount assigned to a pod is called Default. Create a serviceaccount  for our particular requirements:
~~~
 $ oc create serviceaccount mongodb-sa -n [your-namespace]
 $ oc get sa -n [your-namespace]
 $ oc adm policy add-scc-to-user anyuid system:serviceaccount:[your-namespace]:mongodb-sa
$ oc describe sa/mongodb-sa -n [your-namespace]
~~~
__Replace [your-namespace] with your namespace in the above commands (omitting the square brackets).

Create a new folder (anywher) called `multi-component-app` and import it into VS Code. Add a `.gitignore` file and create a local Git repository in the folder. Make the first commit to the repo.


[arch]: ./img/arch.png
[depl]: ./img/depl.png
