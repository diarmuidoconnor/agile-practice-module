## Volumes.

A weakness in our current multi-container app setup is that there is no persistence of MongoDB's data; if the container dies and we restart it, the data is lost. We can solve this with __volumes__.

### Reset.

In MongoDB Compass, disconnect from the database server by right-clicking the 'MongoDB container' entry(left-hand panel), and selecting 'Disconnect'.  

In the VS Code terminal, delete the two containers:
~~~
$ docker stop mongo-express
$ docker rm mongo-express
$ docker stop my-mongoDB
$ docker rm my-mongoDB
~~~

### Bind mounts,

On your laptop, create a folder (anywhere) called `my-db`. Start a new container for the database server, but this time bind-mount the new folder to the container path `/data/db` (Mongo's default databases pathname):
~~~
$ docker run -d --net mongo-network \
 --name my-mongoDB  \
 -p 27017:27017 \
 -e MONGO_INITDB_ROOT_USERNAME=admin \
 -e MONGO_INITDB_ROOT_PASSWORD=secret \
 -v relative-path-to/my-db/:/data/db \
mongo:8.0-rc
~~~
Replace 'elative-path-to/my-db/' with the appropriate relative pathname to your new folder.

On your laptop, notice that the `my-db` folder has been initialised by the DB server running inside the container. 

Start a Mongo Express container:
~~~bash
$ docker run -d --network mongo-network \
 --name mongo-express  \
      -p 8081:8081 \
 -e ME_CONFIG_MONGODB_ADMINUSERNAME=admin \
      -e ME_CONFIG_MONGODB_ADMINPASSWORD=secret \
 -e ME_CONFIG_MONGODB_SERVER=my-mongoDB   \
    mongo-express:1.0-20-alpine3.19
~~~
In a browser tab, navigate to http://localhost:8081/, and create the tmdb database and movies collection as you did in the previous section.

Next, delete the two containers and restart them, as before. In a browser tab, navigate to http://localhost:8081/. This time, notice that the tmdb database already exists.

### Named Volumes,

We'll repeat the procedure, but use a named volume instead of a bind mount.
Create a new empty volume:
~~~
$ docker volume create my-tmdb 
$ docker volume ls            
~~~

Now follow these steps:
+ Delete the two containers.
+ Start the database container, but mount the named volume instead:
~~~
$ docker run -d --net mongo-network \
    --name my-mongoDB  \
    -p 27017:27017 \
    -e MONGO_INITDB_ROOT_USERNAME=admin \
    -e MONGO_INITDB_ROOT_PASSWORD=secret \
    -v my-tmdb:/data/db \
mongo:8.0-rc
~~~
+ Start the Express web app container, as before.
+ Use the browser to navigate to the Express web app, and add the tmdb database, movies collection, and some movie documents, as before.
+ Delete both containers.
+ Restart both containers (mounting the named volume with the database server container).
+ In the browser, navigate to the Express web App, and confirm the tmdb database was persisted inside the named volume.