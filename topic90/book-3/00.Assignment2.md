## DevOps Practice - Assignment Specification.

IMPORTANT Please read the following instructions before commencing this assignment, as it may significantly impact your grade:

Read the entire specification before commencing development, and clarify any aspects you do not understand.

You are advised to set the visibility of your GitHub repo to PRIVATE to prevent plagiarism of your work. After the deadline date, you will be reminded to make it publicly accessible so that it can be assessed.

Your repoâ€™s Git log must have a clear, understandable and coherent history of the work on this assignment. The commit message must summarise the work performed (the task you were working on) at each stage.

__Objective:__ Demonstrate your knowledge of CI/CD practice by creating a pipeline for a Web App using the GitLab CI platform. 

__Completion date:__ xx/11/2025.

__Weighting:__ 45%.

__Context:__ Download [this archive][start]. It's a ToDo app developed with the React framework. 

__Deliverables:__

1. A text file (assignment2.txt) containing:
   + The URL of your GitLab repository. 
   + The URL of the YouTube video demonstrating the execution of your pipeline. 
   
Notes:
+ The repo README is the documentation of the work you have carried out and must be complete and accurate. A template will be provided later.


### CI/CD pipeline.

__You are required__ to create a CI/CD pipeline for the ToDo app that includes the following stages:
+ Build
+ Package
+ Unit Test
+ Staging
+ Acceptance Test
+ Deployment

The Build stage will create a static, distributable form of the app to ensure it is ready for packaging. The command sequence to complete this task is:
~~~bash
$ npm install
$ npm run build
~~~

The package stage dockerizes and publishes the app to your Docker Hub account. 

The Unit Test stage performs a basic test using curl to ensure the app's main page loads correctly. 

The Staging stage deploys the app to a pre-configured AWS EC2 host and uses the host's port 8089 for public access. 

The Deployment stage deploys the app to the same EC2 host as staging, but uses the host's port 80 for public access. This stage must distinguish between continuous delivery and continuous deployment:
+Continuous Delivery - Deployment should only occur on a commit to the repository's 'develop' branch, and its execution is manually triggered.
+Continuous Deployment - Deployment should only happen on a commit to the repository 'main' branch, and it's automatic..

The Dockerfile included with the app's source code uses a development-standard web server for hosting - serve. A production-standard server, e.g. NGINX, would be more appropriate. This is possible with a multi-stage Docker build. 
 
### Grading Spectrum.

__Good (40-50%):__ Packaging and Staging stages completed.

__Excellent (50-70%):__ E2E testing and Deployment (Continuous Deployment) completed.

__Outstanding (70-85%):__ Build stage and Continuous Delivery and Continuous Deployment.

__Independent Learning (85%+):__ Deployment of the production app to the [Vercel][vercel] platform (instead of the EC2 platform)

--------------------------

__Notes:__ To run Cypress tests inside a GitLab CI/CD pipeline, see the relevant YAML excerpts below: 

~~~yaml
stages:
 - stabeA
 - stageB

variables:
   npm_config_cache: "$CI_PROJECT_DIR/.npm"
   CYPRESS_CACHE_FOLDER: "$CI_PROJECT_DIR/cache/Cypress"
   . . . other variables . . . 

cache:
   key:
     files:
 - package.json
   paths:
 - .npm
 - cache/Cypress

jobX:
  stage: stageB
  image:  cypress/browsers:node18.12.0-chrome106-ff106
  script:
 - echo "Run tests in headless mode"
 - npx cypress run --browser chrome ... other options ...
~~~


Note also that the --config option can be used to override the default  configuration settings for Cypress (i.e. the cypress.config.js) at runtime, i.e.

~~~bash
$ npx cypress run --config '{"someKey":"newValue"}'
~~~

[vercel]: https://vercel.com/
[start]: ./img/start.zip